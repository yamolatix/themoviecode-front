{"ast":null,"code":"import _defineProperty from \"/home/yamilaortiztoscano/Desktop/YAMO/Plataforma 5/Git Repositories/tmdb-movie-code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _createReducer;\n\nimport { createAsyncThunk, createReducer } from '@reduxjs/toolkit';\nimport axios from 'axios';\n/* export const allFavorites = createAsyncThunk(\"ALL_FAVORITES\", (userId) => {\n    return axios.get(`http://localhost:3001/api/user/${userId}/favorites`)\n        .then(movie => movie.data)\n        .catch(error => console.log(error))\n}) */\n\nexport var addToFavorites = createAsyncThunk(\"ADD_TO_FAVORITES\", function (thunkAPI, data) {\n  var _thunkAPI$getState = thunkAPI.getState(),\n      user = _thunkAPI$getState.user;\n\n  if (!user.id) throw new Error(\"You need to be logged in\");\n  return axios.post(\"http://www.localhost:3001/api/user/\".concat(user.id, \"/favorite/add\"), data).then(function (favorite) {\n    return favorite;\n  }).catch(function (error) {\n    return console.log(error);\n  });\n});\nexport var removeFromFavorites = createAsyncThunk(\"REMOVE_FROM_FAVORITES\", function (userId, tmdbId) {\n  if (!userId) throw new Error(\"You need to be logged in\");\n  return axios.delete(\"http://www.localhost:3001/api/user/\".concat(user.id, \"/\").concat(tmdbId, \"/remove\")).then(function (favorite) {\n    return favorite;\n  }).catch(function (error) {\n    return console.log(error);\n  });\n});\nvar favoritesReducer = createReducer([], (_createReducer = {}, _defineProperty(_createReducer, addToFavorites.fulfilled, function (state, action) {\n  state.favorites.push(action.payload);\n}), _defineProperty(_createReducer, removeFromFavorites.fulfilled, function (state, action) {\n  state.favorites = state.favorites.filter(function (fav) {\n    return fav.id !== action.payload.id;\n  });\n}), _createReducer));\nexport default favoritesReducer;","map":{"version":3,"names":["createAsyncThunk","createReducer","axios","addToFavorites","thunkAPI","data","getState","user","id","Error","post","then","favorite","catch","error","console","log","removeFromFavorites","userId","tmdbId","delete","favoritesReducer","fulfilled","state","action","favorites","push","payload","filter","fav"],"sources":["/home/yamilaortiztoscano/Desktop/YAMO/Plataforma 5/Git Repositories/tmdb-movie-code/client/src/store/favorites.js"],"sourcesContent":["import { createAsyncThunk, createReducer } from '@reduxjs/toolkit'\nimport axios from 'axios'\n\n/* export const allFavorites = createAsyncThunk(\"ALL_FAVORITES\", (userId) => {\n    return axios.get(`http://localhost:3001/api/user/${userId}/favorites`)\n        .then(movie => movie.data)\n        .catch(error => console.log(error))\n}) */\n\nexport const addToFavorites = createAsyncThunk(\"ADD_TO_FAVORITES\", (thunkAPI, data) => {\n    const { user } = thunkAPI.getState();\n    if (!user.id) throw new Error(\"You need to be logged in\");\n    return axios.post(`http://www.localhost:3001/api/user/${user.id}/favorite/add`, data)\n        .then((favorite) => favorite)\n        .catch(error => console.log(error))\n})\n\nexport const removeFromFavorites = createAsyncThunk(\"REMOVE_FROM_FAVORITES\", (userId, tmdbId) => {\n    if (!userId) throw new Error(\"You need to be logged in\");\n    return axios.delete(\n        `http://www.localhost:3001/api/user/${user.id}/${tmdbId}/remove`\n    )\n        .then((favorite) => favorite)\n        .catch(error => console.log(error))\n});\n\nconst favoritesReducer = createReducer([], {\n    // [allFavorites.fulfilled]: (state, action) => action.payload,\n    [addToFavorites.fulfilled]: (state, action) => {\n        state.favorites.push(action.payload);\n    },\n    [removeFromFavorites.fulfilled]: (state, action) => {\n        state.favorites = state.favorites.filter(\n            (fav) => fav.id !== action.payload.id\n        );\n    },\n});\n\nexport default favoritesReducer;"],"mappings":";;;;AAAA,SAASA,gBAAT,EAA2BC,aAA3B,QAAgD,kBAAhD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA;AACA;AACA;AACA;AACA;;AAEA,OAAO,IAAMC,cAAc,GAAGH,gBAAgB,CAAC,kBAAD,EAAqB,UAACI,QAAD,EAAWC,IAAX,EAAoB;EAAA,yBAClED,QAAQ,CAACE,QAAT,EADkE;EAAA,IAC3EC,IAD2E,sBAC3EA,IAD2E;;EAEnF,IAAI,CAACA,IAAI,CAACC,EAAV,EAAc,MAAM,IAAIC,KAAJ,CAAU,0BAAV,CAAN;EACd,OAAOP,KAAK,CAACQ,IAAN,8CAAiDH,IAAI,CAACC,EAAtD,oBAAyEH,IAAzE,EACFM,IADE,CACG,UAACC,QAAD;IAAA,OAAcA,QAAd;EAAA,CADH,EAEFC,KAFE,CAEI,UAAAC,KAAK;IAAA,OAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAJ;EAAA,CAFT,CAAP;AAGH,CAN6C,CAAvC;AAQP,OAAO,IAAMG,mBAAmB,GAAGjB,gBAAgB,CAAC,uBAAD,EAA0B,UAACkB,MAAD,EAASC,MAAT,EAAoB;EAC7F,IAAI,CAACD,MAAL,EAAa,MAAM,IAAIT,KAAJ,CAAU,0BAAV,CAAN;EACb,OAAOP,KAAK,CAACkB,MAAN,8CACmCb,IAAI,CAACC,EADxC,cAC8CW,MAD9C,cAGFR,IAHE,CAGG,UAACC,QAAD;IAAA,OAAcA,QAAd;EAAA,CAHH,EAIFC,KAJE,CAII,UAAAC,KAAK;IAAA,OAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAJ;EAAA,CAJT,CAAP;AAKH,CAPkD,CAA5C;AASP,IAAMO,gBAAgB,GAAGpB,aAAa,CAAC,EAAD,wDAEjCE,cAAc,CAACmB,SAFkB,EAEN,UAACC,KAAD,EAAQC,MAAR,EAAmB;EAC3CD,KAAK,CAACE,SAAN,CAAgBC,IAAhB,CAAqBF,MAAM,CAACG,OAA5B;AACH,CAJiC,mCAKjCV,mBAAmB,CAACK,SALa,EAKD,UAACC,KAAD,EAAQC,MAAR,EAAmB;EAChDD,KAAK,CAACE,SAAN,GAAkBF,KAAK,CAACE,SAAN,CAAgBG,MAAhB,CACd,UAACC,GAAD;IAAA,OAASA,GAAG,CAACrB,EAAJ,KAAWgB,MAAM,CAACG,OAAP,CAAenB,EAAnC;EAAA,CADc,CAAlB;AAGH,CATiC,mBAAtC;AAYA,eAAea,gBAAf"},"metadata":{},"sourceType":"module"}