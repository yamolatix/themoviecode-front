{"ast":null,"code":"import _defineProperty from \"/home/yamilaortiztoscano/Desktop/YAMO/Plataforma 5/Git Repositories/tmdb-movie-code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _createReducer;\n\nimport { createAsyncThunk, createReducer } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nexport var userRegister = createAsyncThunk(\"USER_REGISTER\", function (data) {\n  return axios.post(\"http://localhost:3001/api/userAuth/register\", data).then(function (user) {\n    return user.data;\n  }).catch(function (error) {\n    console.log(\"******************\", error.response.data.original.constraint); // users_username_key\n    //users_email_key\n\n    if (error.response.data.original.constraint === \"users_username_key\") {\n      return toast(\"Username already exists\", {\n        icon: 'ðŸ‘'\n      });\n    } else if (error.response.data.original.constraint === \"users_email_key\") {\n      return toast(\"You are already a user\", {\n        icon: 'ðŸ‘'\n      });\n    } else {\n      return toast(\"Sorry, we are working to fix the error.\");\n    }\n  });\n});\nexport var userLogin = createAsyncThunk(\"USER_LOGIN\", function (data) {\n  return axios.post(\"http://localhost:3001/api/userAuth/login\", data).then(function (user) {\n    localStorage.setItem('user', JSON.stringify(user.data));\n    return user.data;\n  }).catch(function (error) {\n    if (error.response.data) {\n      return toast.error(error.response.data);\n    } else {\n      return toast(\"Sorry, we are working to fix the error.\");\n    }\n  });\n});\nexport var userLogout = createAsyncThunk(\"USER_LOGOUT\", function () {\n  return axios.post(\"http://localhost:3001/api/userAuth/logout\").then(function () {\n    localStorage.removeItem(\"user\");\n  }).catch(function (error) {\n    return console.log(error);\n  });\n});\nvar userReducer = createReducer([], (_createReducer = {}, _defineProperty(_createReducer, userRegister.fulfilled, function (state, action) {\n  return action.payload;\n}), _defineProperty(_createReducer, userLogin.fulfilled, function (state, action) {\n  return action.payload;\n}), _defineProperty(_createReducer, userLogout.fulfilled, function (state, action) {\n  return action.payload;\n}), _createReducer));\nexport default userReducer;","map":{"version":3,"names":["createAsyncThunk","createReducer","axios","toast","userRegister","data","post","then","user","catch","error","console","log","response","original","constraint","icon","userLogin","localStorage","setItem","JSON","stringify","userLogout","removeItem","userReducer","fulfilled","state","action","payload"],"sources":["/home/yamilaortiztoscano/Desktop/YAMO/Plataforma 5/Git Repositories/tmdb-movie-code/client/src/store/user.js"],"sourcesContent":["import { createAsyncThunk, createReducer } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\n\nexport const userRegister = createAsyncThunk(\"USER_REGISTER\", (data) => {\n    return axios.post(\"http://localhost:3001/api/userAuth/register\", data)\n        .then(user => user.data)\n        .catch(error => {\n            console.log(\"******************\", error.response.data.original.constraint)\n            // users_username_key\n            //users_email_key\n\n            if (error.response.data.original.constraint === \"users_username_key\") {\n                return toast(\"Username already exists\", { icon: 'ðŸ‘' })\n\n            } else if (error.response.data.original.constraint === \"users_email_key\") {\n                return toast(\"You are already a user\", { icon: 'ðŸ‘' });\n            } else {\n                return toast(\"Sorry, we are working to fix the error.\");\n            }\n        });\n});\n\nexport const userLogin = createAsyncThunk(\"USER_LOGIN\", (data) => {\n    return axios.post(\"http://localhost:3001/api/userAuth/login\", data)\n        .then(user => {\n            localStorage.setItem('user', JSON.stringify(user.data))\n            return user.data;\n        })\n        .catch(error => {\n            if (error.response.data) {\n                return toast.error(error.response.data);\n            } else {\n                return toast(\"Sorry, we are working to fix the error.\");\n            }\n        })\n});\n\nexport const userLogout = createAsyncThunk(\"USER_LOGOUT\", () => {\n    return axios.post(\"http://localhost:3001/api/userAuth/logout\")\n        .then(() => {\n            localStorage.removeItem(\"user\")\n        })\n        .catch(error => console.log(error));\n});\n\nconst userReducer = createReducer([], {\n    [userRegister.fulfilled]: (state, action) => action.payload,\n    [userLogin.fulfilled]: (state, action) => action.payload,\n    [userLogout.fulfilled]: (state, action) => action.payload,\n});\n\nexport default userReducer;"],"mappings":";;;;AAAA,SAASA,gBAAT,EAA2BC,aAA3B,QAAgD,kBAAhD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AAEA,OAAO,IAAMC,YAAY,GAAGJ,gBAAgB,CAAC,eAAD,EAAkB,UAACK,IAAD,EAAU;EACpE,OAAOH,KAAK,CAACI,IAAN,CAAW,6CAAX,EAA0DD,IAA1D,EACFE,IADE,CACG,UAAAC,IAAI;IAAA,OAAIA,IAAI,CAACH,IAAT;EAAA,CADP,EAEFI,KAFE,CAEI,UAAAC,KAAK,EAAI;IACZC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,KAAK,CAACG,QAAN,CAAeR,IAAf,CAAoBS,QAApB,CAA6BC,UAA/D,EADY,CAEZ;IACA;;IAEA,IAAIL,KAAK,CAACG,QAAN,CAAeR,IAAf,CAAoBS,QAApB,CAA6BC,UAA7B,KAA4C,oBAAhD,EAAsE;MAClE,OAAOZ,KAAK,CAAC,yBAAD,EAA4B;QAAEa,IAAI,EAAE;MAAR,CAA5B,CAAZ;IAEH,CAHD,MAGO,IAAIN,KAAK,CAACG,QAAN,CAAeR,IAAf,CAAoBS,QAApB,CAA6BC,UAA7B,KAA4C,iBAAhD,EAAmE;MACtE,OAAOZ,KAAK,CAAC,wBAAD,EAA2B;QAAEa,IAAI,EAAE;MAAR,CAA3B,CAAZ;IACH,CAFM,MAEA;MACH,OAAOb,KAAK,CAAC,yCAAD,CAAZ;IACH;EACJ,CAfE,CAAP;AAgBH,CAjB2C,CAArC;AAmBP,OAAO,IAAMc,SAAS,GAAGjB,gBAAgB,CAAC,YAAD,EAAe,UAACK,IAAD,EAAU;EAC9D,OAAOH,KAAK,CAACI,IAAN,CAAW,0CAAX,EAAuDD,IAAvD,EACFE,IADE,CACG,UAAAC,IAAI,EAAI;IACVU,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeb,IAAI,CAACH,IAApB,CAA7B;IACA,OAAOG,IAAI,CAACH,IAAZ;EACH,CAJE,EAKFI,KALE,CAKI,UAAAC,KAAK,EAAI;IACZ,IAAIA,KAAK,CAACG,QAAN,CAAeR,IAAnB,EAAyB;MACrB,OAAOF,KAAK,CAACO,KAAN,CAAYA,KAAK,CAACG,QAAN,CAAeR,IAA3B,CAAP;IACH,CAFD,MAEO;MACH,OAAOF,KAAK,CAAC,yCAAD,CAAZ;IACH;EACJ,CAXE,CAAP;AAYH,CAbwC,CAAlC;AAeP,OAAO,IAAMmB,UAAU,GAAGtB,gBAAgB,CAAC,aAAD,EAAgB,YAAM;EAC5D,OAAOE,KAAK,CAACI,IAAN,CAAW,2CAAX,EACFC,IADE,CACG,YAAM;IACRW,YAAY,CAACK,UAAb,CAAwB,MAAxB;EACH,CAHE,EAIFd,KAJE,CAII,UAAAC,KAAK;IAAA,OAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAJ;EAAA,CAJT,CAAP;AAKH,CANyC,CAAnC;AAQP,IAAMc,WAAW,GAAGvB,aAAa,CAAC,EAAD,wDAC5BG,YAAY,CAACqB,SADe,EACH,UAACC,KAAD,EAAQC,MAAR;EAAA,OAAmBA,MAAM,CAACC,OAA1B;AAAA,CADG,mCAE5BX,SAAS,CAACQ,SAFkB,EAEN,UAACC,KAAD,EAAQC,MAAR;EAAA,OAAmBA,MAAM,CAACC,OAA1B;AAAA,CAFM,mCAG5BN,UAAU,CAACG,SAHiB,EAGL,UAACC,KAAD,EAAQC,MAAR;EAAA,OAAmBA,MAAM,CAACC,OAA1B;AAAA,CAHK,mBAAjC;AAMA,eAAeJ,WAAf"},"metadata":{},"sourceType":"module"}